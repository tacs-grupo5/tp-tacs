<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Mercado Libre sites test</title>
	<script src="../../resources/js/jquery-1.5.1.min.js" ></script>
	<link rel="stylesheet" href="qunit.css" />
	<script src="qunit.js" ></script>	
	<script src="../../resources/js/utils.js" ></script>
	<script src="../../resources/js/mercadoLibreSites.js" ></script>	
</head>
	<body>
		  <h1 id="qunit-header">QUnit example</h1>
		 <h2 id="qunit-banner"></h2>
		 <div id="qunit-testrunner-toolbar"></div>
		 <h2 id="qunit-userAgent"></h2>
		 <ol id="qunit-tests"></ol>
		 <div id="qunit-fixture">test markup, will be hidden</div>	 
		 
		 <table id="sitesTable" style="display:none;"></table>
		 
	</body>
</html>
<script>
	$(document).ready(function(){
		module("Mercado libre sites test",{
			setup: function(){
				$("#sitesTable").html('');
			}
		});
		test("Should create empty table if no response", function() {
			createSitesTable('');
			equals($("#sitesTable tr").size(),0, "Table does not contains rows if response is empty");			
			
		});
		test("Should create 1 row for each site", function() {
			createSitesTable('[{"id":"MLA","name":"Argentina"},{"id":"MLB","name":"Brasil"}]');
			equals($("#sitesTable tr").size(),2, "Table contains 1 row for each site");			
			
		});
		test("First row should be the id of the site", function() {
			createSitesTable('[{"id":"MLA","name":"Argentina"}]');
			equals($("#sitesTable tr:eq(0) td").html(), "MLA", "First row content is the id of the site");			
			
		});
		test("Second row should be a link with the name of the site", function() {
			createSitesTable('[{"id":"MLA","name":"Argentina"}]');
			equals($("#sitesTable tr:eq(0) td:eq(1) a").html(), "Argentina", "Second row is a link with the name of the site");	
			
		});
	});
</script>